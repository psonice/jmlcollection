<html>
<head>
<style type="text/css">
    html, body {
        height: 100%;
    }

    html {
        display: table;
        margin: auto;
    }

    body {
        display: table-cell;
        vertical-align: middle;
        font-family: "Arial Black", Gadget, sans-serif;
        font-size: 7em;
        font-kerning: normal;
        line-height: 1em;
        text-align: center;
        letter-spacing: -0.05em;
    }
</style>
<body>
<script type="text/javascript">
let timestamps = [
    0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31,

    32.0, 32.25, 32.75, 33.25, 33.5, 34.0, 34.25, 34.5, 34.75, 35.0, 35.5, 36.0, 36.25, 36.75, 37.0, 37.25, 37.5, 37.75, 38.25, 38.75, 39.0, 39.5, 39.75, 40.0, 40.25, 40.5, 41.0, 41.5, 41.75, 42.25, 42.5, 42.75, 43.0, 43.25, 43.75, 44.25, 44.5, 45.0, 45.25, 45.5, 45.75, 46.0, 46.5, 47.0, 47.25, 47.75, 48.0, 48.25, 48.5, 48.75, 49.25, 49.75, 50.0, 50.5, 50.75, 51.0, 51.25, 51.5, 52.0, 52.5, 52.75, 53.25, 53.5, 53.75, 54.0, 54.25, 54.75, 55.25, 55.5, 56.0, 56.25, 56.5, 56.75, 57.0, 57.5, 58.0, 58.25, 58.75, 59.0, 59.25, 59.5, 59.75, 60.25, 60.75, 61.0, 61.5, 61.75, 62.0, 62.25, 62.5, 63.0, 63.5, 63.75,

    64.0, 64.125, 64.375, 64.625, 64.875, 65.125, 65.25, 65.5, 65.625, 65.75, 66.0, 66.25, 66.5, 66.75, 66.875, 67.125, 67.25, 67.375, 67.625, 67.875, 68.125, 68.375, 68.5, 68.75, 68.875, 69.0, 69.25, 69.5, 69.75, 70.0, 70.125, 70.375, 70.5, 70.625, 70.875, 71.125, 71.375, 71.625, 71.75, 72.0, 72.125, 72.25, 72.5, 72.75, 73.0, 73.25, 73.375, 73.625, 73.75, 73.875, 74.125, 74.375, 74.625, 74.875, 75.0, 75.25, 75.375, 75.5, 75.75, 76.0, 76.25, 76.5, 76.625, 76.875, 77.0, 77.125, 77.375, 77.625, 77.875, 78.125, 78.25, 78.5, 78.625, 78.75, 79.0, 79.25, 79.5, 79.75, 79.875, 80.125, 80.25, 80.375, 80.625, 80.875, 81.125, 81.375, 81.5, 81.75, 81.875, 82.0, 82.25, 82.5, 82.75, 83.0, 83.125, 83.375, 83.5, 83.625, 83.875, 84.125, 84.375, 84.625, 84.75, 85.0, 85.125, 85.25, 85.5, 85.75, 86.0, 86.25, 86.375, 86.625, 86.75, 86.875, 87.125, 87.375, 87.625, 87.875, 88.0, 88.25, 88.375, 88.5, 88.75, 89.0, 89.25, 89.5, 89.625, 89.875, 90.0, 90.125, 90.375, 90.625, 90.875, 91.125, 91.25, 91.5, 91.625, 91.75, 92.0, 92.25, 92.5, 92.75, 92.875, 93.125, 93.25, 93.375, 93.625, 93.875, 94.125, 94.375, 94.5, 94.75, 94.875, 95.0, 95.25, 95.5, 95.75,

    96.0, 97.625, 97.875, 98.125, 98.25, 99.875, 100.125, 100.375, 100.5, 102.125, 102.375, 102.625, 102.75, 104.375, 104.625, 104.875, 105.0, 106.625, 106.875, 107.125, 107.25, 108.875, 109.125, 109.375, 109.5, 111.125, 111.375, 111.625, 111.75, 113.375, 113.625, 113.875, 114.0, 115.625, 115.875, 116.125, 116.25, 117.875, 118.125, 118.375, 118.5, 120.125, 120.375, 120.625, 120.75, 122.375, 122.625, 122.875, 123.0, 124.625, 124.875, 125.125, 125.25, 126.875, 127.125, 127.375, 127.5
];

let segmentTimestamps = [
    0, 16, 32, 48, 64, 80, 96, 112
];

let segmentText = [
    '#JUMALAUTA',
    'IRCNET IS NOT DEAD',
    'COMMUNICATION IS A REVOLUTIONARY ACT',
    'HAVE YOU ABANDONED DEMOSCENE COMRADES?',
    'REDISCOVER YOUR SENSE OF PURPOSE',
    'WHAT HAVE YOU DONE LATELY?',
    'NO NEED FOR APPS OR WEB BROWSERS',
    'EMBRACE EXTINCTION AND FUTILITY'
]

let colorPairs = [
    [ '#ff0000', '#00ff00' ],
    [ '#0000ff', '#ff00ff' ],
    [ '#ffff00', '#8800ff' ],
    [ '#ff8800', '#00ffff' ],
    [ '#ff0000', '#0000ff' ],
    [ '#ffff00', '#0000ff' ],
    [ '#00ff00', '#880088' ],
    [ '#0000ff', '#ff8888' ]
];

let song = new Audio('audio.mp3');
let initialTimestamp = null;
let position = 1;
let colorsInverted = false;
let colorPosition = 0;

setup();

function play() {
    song.play();

    let startButtonDiv = document.getElementById('startbutton');
    startButtonDiv.style.display = 'none';

    window.requestAnimationFrame(animationFrame);
}

function animationFrame(timestamp) {
    if (! initialTimestamp) {
        initialTimestamp = timestamp;
    }

    let delta = timestamp - initialTimestamp;
    drawContentWithDelta(delta);

    window.requestAnimationFrame(animationFrame);
}

function drawContentWithDelta(delta) {
    timestamp = timestamps[position] * 1000.0;

    if (delta < timestamp) {
        let pair1 = colorsInverted ? 0 : 1;
        let pair2 = colorsInverted ? 1 : 0;

        document.body.style.backgroundColor = colorPairs[colorPosition][pair1];
        document.body.style.color = colorPairs[colorPosition][pair2];
        document.body.innerHTML = segmentText[colorPosition];
    } else {
        for (let i = position + 1; i < timestamps.length; i++) {
            let stamp = timestamps[i] * 1000.0;

            if (stamp > delta) {
                position = i;
                break;
            }
        }

        if (delta > (segmentTimestamps[colorPosition + 1] * 1000.0)) {
            colorPosition += 1;
        }

        colorsInverted = !colorsInverted;
    }
}

function setup() {
    song.load();

    document.body.innerHTML = '<div id="startbutton"><a href="javascript:void(0)" onclick="play()">start</a></div>';
}

</script>
</body>
</html>
